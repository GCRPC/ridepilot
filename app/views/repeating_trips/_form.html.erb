<%= form_for(@repeating_trip) do |f| %>
  <% if @repeating_trip.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@repeating_trip.errors.count, "error") %> prohibited this repeating trip from being saved:</h2>

      <ul>
      <% @repeating_trip.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <!-- the customer id needs to be passed in this action -->
  <%= f.hidden_field :customer_id, :value=>@customer.id %><br/>

  Repeating Trip for <strong><%= @customer.name %></strong><br/>

  <%= f.fields_for :schedule_attributes do |s| %>
    <%= s.hidden_field :repeat %><br/>

    First pickup time: <br/>
    <%= s.text_field :start_date %><br/>

    Repeat every: <br/>
    <%= s.select :interval_unit, ["day", "week", "month"] %><br/>

    <%= s.hidden_field :interval %><br/>
  <% end %> 

  Appointment time: <br/>
  <%= f.text_field :appointment_time %><br/>

  Guest count: <br/>
  <%= f.text_field :guest_count %><br/>

  Attendant count: <br/>
  <%= f.text_field :attendant_count %><br/>

  Group size: <br/>
  <%= f.text_field :attendant_count %><br/>

  <!-- todo: autocomplete / geocode here -->
  Pickup address: <br/>
  <%= f.text_field :pickup_address_id %><br/>

  Dropoff address: <br/>
  <%= f.text_field :dropoff_address_id %><br/>


  Mobility:<br/>
  <%= f.collection_select :mobility_id, @mobilities, :id, :name %><br/>

  Funding source:<br/>
  <%= f.collection_select :funding_source_id, @funding_sources, :id, :name %><br/>

  Trip purpose: <br/>
  <%= f.text_field :trip_purpose %><br/>

  Notes: <br/>
  <%= f.text_field :notes %><br/>


  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
