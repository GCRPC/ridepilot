<div id="page-header">
  <h1>Customer Listing</h1>
</div>

<%= form_tag found_customers_path, :class=>'customer-search', :method=>:get do %> 
  <label for="customer_id">Search:</label>
  <%= autocomplete_field_tag 'customer_name', '', autocomplete_customers_path, :size => 30, :id_element => "#customer_id" %>
  <%= hidden_field_tag 'customer_id' %>
  <%= submit_tag "Show Details" %>
  <% if can? :create, Trip %>
  <%= submit_tag "New Trip for This Customer" %>
  <% end %>
<% end %>

<table class="customer-list">
  <thead>
    <tr>
      <th></th>
      <th>Name</th>
      <th>Phone</th>
      <th>Alternate Phone</th>
      <th>Email</th>
      <th>Activated date</th>
      <th>Inactivated date</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
  <% @customers.each do |customer| %>
    <tr>
      <td class="plurality"><%= link_to customer.group ? content_tag(:span, "Group", :class=>'group') : content_tag(:span, "Individual", :class=>'individual'), customer %></td>
      <td><%= link_to customer.first_name + h(' ') + customer.middle_initial + h(' ') + customer.last_name, customer %></td>
      <td><%= customer.phone_number_1 %></td>
      <td><%= customer.phone_number_2 %></td>
      <td><%= customer.email %></td>
      <td><%= customer.activated_date %></td>
      <td><%= customer.inactivated_date %></td>
      <td><%= link_to 'New Trip', '#', :class=>'new-trip' %></td>
      <td><%= link_to 'Edit', edit_customer_path(customer), :class=>'edit' %></td>
      <td><%= link_to 'Delete', customer, :confirm => 'Are you sure?', :method => :delete, :class=>'delete' %></td>
    </tr>
    <% end %>
  </tbody>
</table>

<hr />

<%= link_to 'New Customer', new_customer_path, :class=>'action-bttn' %>


<script type='text/javascript'>
  $("tr:odd").addClass("odd");
</script>
