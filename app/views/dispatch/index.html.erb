<form id="refresh" class="">
  <div class="actions" style="border:0;">
    <%= submit_tag "Refresh", :onclick => "d.refresh(); return false;" -%>
  </div>
</form>

<div id="page-header">
  <h1>Dispatcher</h1>
  <form id="search" class="">
    <div class="actions" style="border:0;">
      <%= text_field_tag "address", nil, :title => "Locate Address" -%>
      <%= submit_tag "Search", :onclick => "locate(); return false;" -%>
      <span id="search-spinner" style="display: none;"></span>
    </div>
  </form>
</div>
<div class="clearfix"></div>

<div class="left_column">
  <div id="tree">
    Loading...
  </div>
  &nbsp;
</div>

<div id="map-container">
  
</div>

<script type="text/javascript" charset="utf-8">
  if ( window.location.protocol == "https:" )
    document.write('<scr' + 'ipt type="text/javascript" src="https://maps-api-ssl.google.com/maps/api/js?sensor=false"></scr' + 'ipt>');
  else
    document.write('<scr' + 'ipt type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></scr' + 'ipt>');
</script>

<%= javascript_include_tag "styledmarker.js" %>
<%= javascript_include_tag "jquery.jstree.js" %>
<%= javascript_include_tag "dispatcher.js" %>
<%= stylesheet_link_tag "jstree-apple/style.css" %>

<script type="text/javascript" charset="utf-8">
  function locate() {
    f = $("#address");
    if (f.val() == f.attr("title")) {
      return false;
    }
    d.locateAddress(f.val());
  }

  $(document).ready(function() {
    d = new Dispatcher("tree", "map-container");
    hinted_field($("#address"));
  });
</script>
